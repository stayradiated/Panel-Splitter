(function(){var e,t={},n={},r=0,i=0,s=!1,o={},u=0,a={pos:0,width:0},f=function(e,n){this.id=e;this.el=n.el;this.min=n.min||0;this.max=n.max||Infinity;this.width=n.width||0;switch(this.id){case"left":this.pos=0;break;case"center":this.pos=t.left.width;break;case"right":this.pos=t.left.width+t.center.width}this.id!=="right"&&(this.el.style.width=this.width+"px");this.el.style.left=this.pos+"px"};f.prototype={move:function(e,t){t?this.pos+=e:this.pos=e;this.el.style.left=this.pos+"px"},resize:function(e,t){t?this.width+=e:this.width=e;this.width<this.min?this.width=this.min:this.width>this.max&&(this.width=this.max);this.el.style.width=this.width+"px"}};var l=function(e){this.id=e;this.el=h.createElement("div");this.pos=0;if(this.id==="left"){this.left=t.left;this.right=t.center}else if(this.id==="right"){this.left=t.center;this.right=t.right}this.el.className="splitter split-"+this.id;this.el.style.left=this.right.pos+"px";this.left.el.insertAdjacentElement("afterend",this.el);this.pos=this.el.offsetLeft;this.el.obj=this;this.el.onmousedown=v.mousedown};l.prototype={move:f.prototype.move,resize:function(e){var r=!0;e<this.left.min+o.left?e=this.left.min+o.left:e>this.left.max+o.left&&(e=this.left.max+o.left);if(this.id==="right"){r=!1;o.right-e<this.right.min?r=!0:o.right-e>this.right.max&&(e=o.right-this.right.max)}var s=e-a.pos;if(s===0){this.pos=e;return!0}if(this.id==="right"){t.center.resize(e-o.left);t.right.move(e);n.right.move(e)}else if(this.id==="left"){n.left.move(e);n.right.move(s,!0);t.left.resize(e-o.left);t.center.move(e);t.right.move(n.right.pos)}if(p==="node"&&r){i+=s;o.right=c.width=i}this.pos=a.pos=e}};var c,h,p;if(typeof process!="undefined"){p="node";c=global.gui.Window.get();h=global.document}else{p="browser";c=window;h=document}var d=function(e){var t=e-r;t<0?t=0:t>i&&(t=i);return t},v={mousedown:function(e){s=this.obj;o={left:0,right:i};s.id==="right"?o.left=n.left.pos:s.id==="left"&&(o.right=n.right.pos);a.pos=d(e.clientX);h.body.className="resizing"},mousemove:function(e){if(s){var t=d(e.clientX);s.resize(t)}},mouseup:function(){p=="node"&&s.id==="left"&&c.setMinimumSize(t.left.max+t.center.min+t.right.min,0);h.body.className="";s=!1},resize:function(){if(!s){i=e.offsetWidth;var r=i-a.width;if(r===0||i<u)return!1;if(r<0&&t.right.el.offsetWidth<=t.right.min){t.center.resize(r,!0);t.right.move(r,!0);n.right.move(r,!0)}a.width=i}}},m=function(r){e=r.parent;t.left=new f("left",r.panels.left);t.center=new f("center",r.panels.center);t.right=new f("right",r.panels.right);n.left=new l("left");n.right=new l("right");i=e.offsetWidth;u=t.left.min+t.center.min+t.right.min;h.onmousemove=v.mousemove;h.onmouseup=v.mouseup;window.onresize=v.resize},g={init:m,panels:t,splitters:n};typeof module!="undefined"?module.exports=g:window.Splitter=g})();